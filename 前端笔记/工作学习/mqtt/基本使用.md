```js
// npm install mqtt

import mqtt from 'mqtt'

const options = {
  port:8083,
  connectTimeout:4000,
  clientId:'mqtt_' + Math.random().toString(16).substr(2,8), //随机Id
}
var client = mqtt.connect('ws://192.168.31.151/mqtt',options)

// 监听事件
methods:{
  mqttMsg(){
    client.on('connect',(e)=>{
      console.log('连接成功')
      //订阅一个主题
      client.subscribe('/test/helloworld',{qos:0},(error)=>{
        console.log(error)
      })
    })
    //消息监听,当有人往订阅的主题里发消息时就会触发
    client.on('message',(topic,message)=>{
      console.log('收到来自',topic,'的消息',message.toString())
      if(message.toString() == 'hi'){
        //发布消息
        client.publish('/test/abc','hello',{
          qos:0, rein: false
        },(error)=>{
          console.log('error')
        })
      }
    })
    //重连监听
    client.on('reconnect',(error)=>{
      console.log('正在重连',error)
    })
    //连接错误
    client.on('error',(error)=>{
      console.log('连接失败'，error)
    })
  }
}
```

