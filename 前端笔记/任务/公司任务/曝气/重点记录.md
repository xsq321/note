#### 1. 设置全局属性：所有指标的信息

- 包含所有指标所对应的中英文名、单位

- 不知道放哪里合适，先放 plugins 中当做插件使用



#### 2. 父子组件传值（props）

父组件要传递的数据如果是通过ajax、mqtt等异步函数获取的，则在子组件的生命周期函数中获取不到数据，原因是生命周期函数属于同步任务，在异步之前；而且还需注意父子组件生命周期的前后顺序，这就要求父组件的异步函数尽量放 created 中，以保证在子组件之前执行

解决办法：在子组件中设定监听事件或者其他异步函数（甚至用一个0秒的定时器或者 $nextTick 都可以）；

也可尝试用async、await异步函数解决

https://blog.csdn.net/weixin_45740510/article/details/114174558



#### 3. 气泡动画

```js
initBubble() {
  var bubbleBox = document.querySelector('.bubble-box')
  var c = document.getElementById('bubbles')
  var ctx = c.getContext('2d')
  var particles = 40,
      minRadius = 2,
      maxRadius = 7,
      speed = 0.01
  var width, height
  var Bubbles = []
  var base = 1.5 // 基本速度

  function resizeCanvas() {
    width = bubbleBox.clientWidth
    height = bubbleBox.clientWidth * 0.63
    // c.width = width
    // c.height = height
    Bubbles = []
    for (let i = 1; i < particles; i++) {
      // 用于分割气泡，让气泡在视觉上是产生于管道口
      // if ([3, 4, 5, 6, 7, 8].includes(i % 10)) {
      Bubbles.push({
        x: (width / particles) * i,
        y: height * Math.random(),
        r: minRadius + Math.random() * (maxRadius - minRadius),
        speed: Math.random() * 2 + base,
      })
      // }
    }
  }

  function draw() {
    // 核心代码，每次都重绘，同时解决了浏览器大小变化时的自适应
    c.width = width
    c.height = height
    for (let i = 0; i < Bubbles.length; i++) {
      var b = Bubbles[i]
      // console.log(i, b)
      ctx.beginPath()
      ctx.arc(b.x, b.y, b.r, 0, 2 * Math.PI)

      b.alpha = 0.5 * (b.y / height)
      b.speed += speed // 上升的速度会越来越快

      ctx.strokeStyle = 'rgba(255, 255, 255, .9)'
      ctx.stroke()
      ctx.fillStyle = 'hsla(203, 75%, 69%,' + b.alpha + ')'
      ctx.fill()
      b.y -= b.speed
      // 对气泡进行重新设置，包括大小及速度
      if (b.y < 0) {
        b.y = height
        b.speed = Math.random() * 2 + base
        b.r = minRadius + Math.random() * (maxRadius - minRadius)
      }
    }
    window.requestAnimationFrame(draw)
  }
  resizeCanvas()
  draw()
  window.addEventListener('resize', resizeCanvas, false)
},
```

