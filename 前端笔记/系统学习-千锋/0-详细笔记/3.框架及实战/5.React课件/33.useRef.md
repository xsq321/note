## ä¸€ã€æ¦‚å¿µ
useRefï¼Œä»–çš„ä½œç”¨æ˜¯â€œå‹¾ä½â€æŸäº›ç»„ä»¶æŒ‚è½½å®Œæˆæˆ–é‡æ–°æ¸²æŸ“å®Œæˆåæ‰æ‹¥æœ‰çš„æŸäº›å¯¹è±¡ï¼Œå¹¶è¿”å›è¯¥å¯¹è±¡çš„å¼•ç”¨ã€‚è¯¥å¼•ç”¨åœ¨ç»„ä»¶æ•´ä¸ªç”Ÿå‘½å‘¨æœŸä¸­éƒ½å›ºå®šä¸å˜ï¼Œè¯¥å¼•ç”¨å¹¶ä¸ä¼šéšç€ç»„ä»¶é‡æ–°æ¸²æŸ“è€Œå¤±æ•ˆã€‚è¿”å›ä¸€ä¸ªå¯å˜çš„ ref å¯¹è±¡ï¼Œè¯¥å¯¹è±¡åªæœ‰ä¸ª current å±æ€§ï¼Œåˆå§‹å€¼ä¸ºä¼ å…¥çš„å‚æ•°( initialValue )ã€‚è¿”å›çš„ ref å¯¹è±¡åœ¨ç»„ä»¶çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…ä¿æŒä¸å˜ã€‚å½“æ›´æ–° current å€¼æ—¶å¹¶ä¸ä¼š re-render ï¼Œè¿™æ˜¯ä¸ useState ä¸åŒçš„åœ°æ–¹ã€‚æ›´æ–° useRef æ˜¯ side effect (å‰¯ä½œç”¨)ï¼Œæ‰€ä»¥ä¸€èˆ¬å†™åœ¨ useEffect æˆ– event handler é‡Œã€‚useRef ç±»ä¼¼äºç±»ç»„ä»¶çš„ this
```jsx
const refContainer = useRef(initialValue);

```
## äºŒã€useRefæ˜¯æ¥è§£å†³ä»€ä¹ˆé—®é¢˜çš„
### 1ã€JSXç»„ä»¶è½¬æ¢åå¯¹åº”çš„çœŸå®DOMå¯¹è±¡ã€‚å¦‚ä½•è·å–inputçš„çœŸå®dom
useRefåªé€‚åˆâ€œå‹¾ä½â€å°å†™å¼€å¤´çš„ç±»ä¼¼åŸç”Ÿæ ‡ç­¾çš„ç»„ä»¶ã€‚å¦‚æœæ˜¯è‡ªå®šä¹‰çš„reactç»„ä»¶(è‡ªå®šä¹‰çš„ç»„ä»¶å¿…é¡»å¤§å†™å­—æ¯å¼€å¤´)ï¼Œé‚£ä¹ˆæ˜¯æ— æ³•ä½¿ç”¨useRefï¼ˆå½“ç„¶ä¹Ÿæœ‰ä¸€äº›å¥‡æ·«æŠ€å·§åé¢æˆ‘ä»¬åç»­è¯¾ç¨‹ä¼šè®²ğŸ˜ˆï¼‰çš„ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬å¦‚ä½•è·å–è¿™ä¸ª <input/> çœŸå®DOMå‘¢ã€‚é‚£ä¹ˆå°±å¯ä»¥ä½¿ç”¨**useRef**
#### åˆå§‹åŒ–inputèšç„¦
```jsx
import React,{useEffect,useRef} from 'react'


function Component() {
  //å…ˆå®šä¹‰ä¸€ä¸ªinputRefå¼•ç”¨å˜é‡ï¼Œç”¨äºâ€œå‹¾ä½â€æŒ‚è½½ç½‘é¡µåçš„è¾“å…¥æ¡†
  const inputRef = useRef(null);


  useEffect(() => {
    //inputRef.currentå°±æ˜¯æŒ‚è½½åˆ°ç½‘é¡µåçš„é‚£ä¸ªè¾“å…¥æ¡†ï¼Œä¸€ä¸ªçœŸå®DOMï¼Œå› æ­¤å¯ä»¥è°ƒç”¨htmlä¸­çš„æ–¹æ³•focus()
    inputRef.current.focus();
  },[]);


  return <div>
    {/* é€šè¿‡ ref å±æ€§å°† inputRefä¸è¯¥è¾“å…¥æ¡†è¿›è¡Œâ€œæŒ‚é’©â€ */}
    <input type='text' ref={inputRef} />
  </div>
}
export default Component
```
### 2ã€åœ¨useEffectä¸­åˆ›å»ºçš„å˜é‡ï¼Œå¦‚ä½•åœ¨useEffect ä»¥å¤–çš„åœ°æ–¹ï¼Œè·å–å¹¶å¼•ç”¨
#### ä¾‹å­
1ã€ç»„ä»¶ä¸­æœ‰ä¸€ä¸ªå˜é‡countï¼Œå½“è¯¥ç»„ä»¶æŒ‚è½½åˆ°ç½‘é¡µåï¼Œcountæ¯ç§’è‡ªåŠ¨ +1ã€‚
2ã€ç»„ä»¶ä¸­æœ‰ä¸€ä¸ªæŒ‰é’®ï¼Œç‚¹å‡»æŒ‰é’®å¯ä»¥åœæ­¢countè‡ªåŠ¨+1

```jsx
import React,{useState,useEffect,useRef} from 'react'


function Component() {
  const [count,setCount] =  useState(0);
  const timerRef = useRef(null);//å…ˆå®šä¹‰ä¸€ä¸ªtimerRefå¼•ç”¨å˜é‡ï¼Œç”¨äºâ€œå‹¾ä½â€useEffectä¸­é€šè¿‡setIntervaleåˆ›å»ºçš„è®¡æ—¶å™¨


  useEffect(() => {
    //å°†timerRef.currentä¸setIntervaleåˆ›å»ºçš„è®¡æ—¶å™¨è¿›è¡Œâ€œæŒ‚é’©â€
    timerRef.current = setInterval(() => {
      setCount((prevData) => { return prevData +1});
    }, 1000);
    return () => {
      //é€šè¿‡timerRef.currentï¼Œæ¸…é™¤æ‰è®¡æ—¶å™¨
      clearInterval(timerRef.current);
    }
  },[]);


  const clickHandler = () => {
    //é€šè¿‡timerRef.currentï¼Œæ¸…é™¤æ‰è®¡æ—¶å™¨
    clearInterval(timerRef.current);
  };


  return (
    <div>
      {count}
      <button onClick={clickHandler} >stop</button>
    </div>
  )
}


export default Component
```
### 4ã€çˆ¶ç»„ä»¶è°ƒç”¨å­ç»„ä»¶å†…çš„æ–¹æ³•
> **æ³¨æ„:é™¤éæƒ…å†µéå¸¸ç‰¹æ®Šï¼Œå¦åˆ™ä¸€èˆ¬æƒ…å†µä¸‹éƒ½ä¸è¦é‡‡ç”¨ çˆ¶ç»„ä»¶è°ƒç”¨å­ç»„ä»¶çš„å‡½æ•° è¿™ç§ç­–ç•¥**

#### å®ç°æ€è·¯
çˆ¶ç»„ä»¶ä¸­é€šè¿‡ useRef å®šä¹‰ä¸€ä¸ªé’©å­å˜é‡ï¼Œä¾‹å¦‚ childFunRef
çˆ¶ç»„ä»¶é€šè¿‡å‚æ•°é…ç½®ï¼Œå°† childFunRef ä¼ é€’ç»™å­ç»„ä»¶
å­ç»„ä»¶åœ¨è‡ªå·±çš„ useEffect() ä¸­å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œä¾‹å¦‚ doSomting()
åˆ’é‡ç‚¹ï¼šä¸€å®šè¦åœ¨ useEffect() ä¸­å®šä¹‰ doSomting()ï¼Œä¸èƒ½ç›´æ¥åœ¨å­ç»„ä»¶å†…éƒ¨å®šä¹‰ã€‚
å› ä¸ºå¦‚æœ doSomting() å®šä¹‰åœ¨å­ç»„ä»¶å†…éƒ¨ï¼Œé‚£ä¹ˆå°±ä¼šé€ æˆæ¯ä¸€æ¬¡ç»„ä»¶åˆ·æ–°éƒ½ä¼šé‡æ–°ç”Ÿæˆä¸€ä»½ doSomthing()
ç„¶åå°† doSomting() èµ‹å€¼åˆ° childFunRef.current ä¸­
è¿™æ ·ï¼Œå½“çˆ¶ç»„ä»¶æƒ³è°ƒç”¨å­ç»„ä»¶ä¸­çš„ doSomting() æ—¶ï¼Œå¯æ‰§è¡Œ childFunRef.current.doSomting()
#### çˆ¶ç»„ä»¶
```jsx
import { useRef } from "react";
import ChildComponent from "./child";


const ParentComponent = () => {
  const childFunRef = useRef();
  const handleOnClick = () => {
    if (childFunRef.current) {
      childFunRef.current.doSomething();
    }
  };
  return (
    <div>
      <ChildComponent funRef={childFunRef} />
      <button onClick={handleOnClick}>æ‰§è¡Œå­é¡¹çš„doSomething()</button>
    </div>
  );
};


export default ParentComponent;
```
#### å­ç»„ä»¶
```jsx
import { useEffect, useState } from "react";


const ChildComponent = ({ funRef }) => {
  const [num, setNum] = useState(0);
  useEffect(() => {
    const doSomething = () => {
      setNum(Math.floor(Math.random() * 100));
    };
    funRef.current = { doSomething }; //åœ¨å­ç»„ä»¶ä¸­ä¿®æ”¹çˆ¶ç»„ä»¶ä¸­å®šä¹‰çš„childFunRefçš„å€¼
  }, [funRef]);
  return <div>{num}</div>;
};


export default ChildComponent;
```

## ä¸‰ã€useRefä¸createRefçš„åŒºåˆ«
1ã€useRefæ˜¯é’ˆå¯¹å‡½æ•°ç»„ä»¶çš„ï¼Œå¦‚æœæ˜¯ç±»ç»„ä»¶åˆ™ä½¿ç”¨React.createRef()ã€‚
2ã€React.createRef()ä¹Ÿå¯ä»¥åœ¨å‡½æ•°ç»„ä»¶ä¸­ä½¿ç”¨ã€‚useRefåªèƒ½åœ¨react hooksä¸­ä½¿ç”¨
3ã€createRefæ¯æ¬¡éƒ½ä¼šè¿”å›ä¸ªæ–°çš„å¼•ç”¨;è€ŒuseRefä¸ä¼šéšç€ç»„ä»¶çš„æ›´æ–°è€Œé‡æ–°åˆ›å»º
