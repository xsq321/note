#### 1. json-server 插件

可使用 json-server 模拟服务端接口数据，可以根据 json 数据建立一个完整的 web 服务

安装：`npm i -g json-server`

新建一个文件夹，下建 db.josn 文件：   // 不能在本项目文件夹下创建，不然每次修改后都会导致项目重新刷新

```json
{
	"users":[],  // 每个属性都将是一个接口地址
  "goods":[]
}
```

启动：`json-server --watch .\db.json --port 5000`

使用：

```js
wx.request({
  url: 'http://localhost:5000/users',
  method:'POST',
  data:{
    username:'xiaoming',
    password:'123'
  }
})
```

其他类似，post 用于添加，get 用于获取，put 用于修改，delete 用于删除，后三者可在 url 后添加 id 用于指定；注意 put 修改时需传递完整的对象，因为它是直接替换原对象，小程序不支持 patch 请求；

对于一些静态资源，如图片可以放在和 db.json 同级的 public 文件夹下的 images 文件夹下，使用通过 ：`http://localhost:5000/images/01.jpg`  // 不需要写 public ，会自动从这里面找。

使用指南：https://www.cnblogs.com/Megasu/p/15782353.html



#### 2. request 封装

新建 utils 文件夹，下建 request.js 文件：

```js
export default function request(params){
	wx.showLoading({  // 显示加载提示框
		title: '加载中...',
	})
	return new Promise((resolve,reject)=>{
		wx.request({
			...params,
			url:'http://localhost:5000'+params.url,  // 拼接 baseURL
			success(res){
				resolve(res.data)
			},
			fail(err){
				reject(err)
			},
			complete(){  // 不管请求成功或失败在请求完成后都会运行
				wx.hideLoading()  // 关闭提示框
			}
		})
	})
}
```

这样就可以使用 .then 与 .catch 进行成功与失败的请求回调了，且可添加加载提示框等功能



#### 3. 授权模块

本地存储：`wx.getStorageSync('token')` , `wx.setStorageSync('token',值)`

获取用户信息：`wx.getUserProfile()`




