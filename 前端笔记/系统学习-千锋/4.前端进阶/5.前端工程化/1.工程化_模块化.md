前端工程化是一种将前端开发过程中的工作流程、开发规范、构建工具、自动化脚本等进行优化和集成的方法论。通过前端工程化,可以提高团队的开发效率、代码质量和项目可维护性。

主要概念包括：模块化、构建工具、自动化测试、代码规范、版本控制、性能优化、自动化部署等



#### 1. 模块化

模块化开发就是将程序划分成一个个小的结构，结构中有自己的作用域，也可导入或导出模块的变量

发展历程：简单函数 - 闭包函数 - 自调用函数 - CommonJS - ESModule - 



#### 2. CommonJS 规范

每个文件就是一个模块，拥有自己独立的作用域、变量和方法。在每个模块内部，module 变量代表当前模块，它的属性 exports 是对外的接口；

使用 `require("./test.js")` 可以加载模块，即获取某个模块的 module.exports 属性，require 是同步加载，所以会阻塞程序的运行（必须等引入的那个模块运行完毕才继续向下执行，所以有了缓存）；导入时可以省略 .js 

模块可以多次加载，但只会在第一次加载时运行一次，之后的加载都是直接读取缓存结果（放在 Node 的全局变量 Module._cache 中 ）

并不能在浏览器中直接使用 CommonJS ，需借助 browserify 工具将其转为普通 js ；或者直接使用 node 运行



#### 3. ESModule 规范

在编译阶段就确定了依赖关系和输入输出

每个模块依旧只会运行一次，之后的加载直接读取缓存

通过 export 导出，import 导入；导入 `import { fn } from "./test.js"` 必须写在最外层作用域，导入时不能省略 .js ；导入的变量等是只读的，不允许赋值修改

支持异步导入：`import("./test.js").then(mod => console.log(mod))`

并不能直接 node 运行，而是需要 `npm init -y` 创建 package.json 文件后再添加 `"type": "module"` 之后才可以通过 node 运行

可以直接在浏览器中运行：`<script type="module" src="./index.js"></script>` ，只需注意加上 type



