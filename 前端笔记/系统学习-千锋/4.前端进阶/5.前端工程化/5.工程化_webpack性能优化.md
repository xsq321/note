优化方案：使⽤多进程优化构建速度，使⽤分包减少构建⽂件体积，减少构建⽬标提升构建速度



#### 1. 构建速度的测量插件 speed-measure-webpack-plugin

使用插件，显示每个 loader 和 plugin 执⾏时间，会将⽐较耗时的⽤红⾊标记出来。

插件地址：https://github.com/webpack-contrib/thread-loader

安装：`npm i speed-measure-webpack-plugin -D`

使用：用 .wrap 方法包裹 webpack 配置

```js
const SpeedMeasurePlugin = require('speed-measure-webpack-plugin')
const smp = new SpeedMeasurePlugin({
  disable: !process.env.MEASURE, // 是否使用该插件
  outputFormat: 'humanVerbose', // 显示更详细的信息
  loaderTopFiles: 2, // 显示耗费时间最长的两个文件
});
smp.wrap(webpackConfig)
```

对于 vue 来说就是：

```js
// vue.config.js
module.exports = defineConfig({
  transpileDependencies: true,
  configureWebpack: smp.wrap({}), // 大括号里就是写 webpack 配置的，如 resolve, plugins 等
});
```

这样在 npm run build 时就会将打包时间及文件大小打印出来



#### 2. 构建体积检测插件 webpack-bundle-analyzer

webpack-bundle-analyzer 是 webpack 的插件，需要配合 webpack 和 webpack-cli ⼀起使⽤。这个插件可以读取 output ⽂件夹中的 stats.json ⽂件，把该⽂件通过网页形式可视化展现，⽣成代码分析报告，可以直观地分析打包出的⽂件有哪些，及它们的⼤⼩、占⽐情况、各⽂件 Gzipped 后的⼤⼩、模块包含关系、依赖项等。

通过分析图可帮助我们了解 bundle 包中的真正内容、找出哪些模块尺⼨最⼤、查找误引⼊的模块、优化项⽬等

插件地址：https://github.com/webpack-contrib/webpack-bundle-analyzer

安装：`npm install webpack-bundle-analyzer -D`

使用：

```js
const { BundleAnalyzerPlugin } = require("webpack-bundle-analyzer");

  configureWebpack: smp.wrap({
    plugins: [
      new BundleAnalyzerPlugin({
        analyzerMode: "static", // 生成静态文件 report.html 
      }),
    ],
  }),
```



#### 3. 构建性能优化之多进程 thread-loader































